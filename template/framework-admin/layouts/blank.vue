<template>
  <section class="blank">
    <layout-header
      :value="$route.path"
      :menus="mainMenu"
      :user-info="userInfo"
      :dropdown="dropDownList"
      @clickTitle="$router.push('/?skip=1')"
    >
      <template slot="title">
        <svg-icon icon-class="logo" style="margin-right: 5px;"></svg-icon>DEEPEXI ADMIN
      </template>
    </layout-header>

    <section class="sub-content">
      <section class="content">
        <nuxt />
      </section>
      <el-footer :height="FOOTER_HEIGHT">
        <copyright></copyright>
      </el-footer>
    </section>
  </section>
</template>

<script>
import {mapState, mapGetters, mapMutations} from 'vuex'
import {FOOTER_HEIGHT} from '@/assets/export.less'
import LayoutHeader from '@/containers/header.vue'
import Copyright from '@/components/copyright.vue'

export default {
  components: {
    LayoutHeader,
    Copyright,
  },

  data() {
    return {
      FOOTER_HEIGHT,
      dropDownList: [
        {
          name: '退出',
          click: () => {
            this.logout()
          },
        },
      ],
    }
  },

  computed: {
    ...mapState(['currentMenuId']),
    ...mapGetters(['mainMenu', 'userInfo', 'sideMenu']),
  },

  methods: {
    ...mapMutations(['logout']),
  },
}
</script>

<style lang="less" scoped>
.blank {
  height: 100vh;
  overflow: hidden;
  background-color: @--background-color-base;

  .sub-content {
    overflow-y: auto;
    height: calc(100vh - @--header-height);
  }

  .content {
    margin: 20px;
    margin-bottom: 0;
    min-height: calc(100vh - @--header-height - @--footer-height);
    background-color: transparent;
  }
}
</style>
